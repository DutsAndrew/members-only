<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <% if (typeof(currentUser) !== 'undefined') { %>
      <% if (currentUser.role === 'member' || currentUser.role === 'admin') { %>
        <% if (typeof(messages) !== 'undefined') { %>
          <div class="messages-container">
            <% messages.forEach((message) => { %>
              <div class="message-container">
                <div class="message-information">
                  <p class="message-title">
                    <%- message.title %>
                  </p>
                  <p class="message-title">
                    <%- message.body %>
                  </p>
                  <div class="message-details">
                    <p class="message-author">
                      <%= message.author.username %>
                    </p>
                    <p class="message-date">
                      <%= message.timestamp.split('T')[0] %>,
                      <%= message.timestamp.split("T")[1].split(".")[0] %>
                    </p>
                  </div>
                </div>
                <% if (currentUser.role === 'admin') { %>
                  <a href="<%= '/app/delete-message/' + message._id %>">
                    <button class="delete-message-button">
                      Delete Message
                    </button>
                  </a>
                <% }; %>
              </div>
            <% }); %>
          </div>
        <% }; %>
      <% } else { %>
        <% if (typeof(messages) !== 'undefined') { %>
          <div class="messages-container">
            <% messages.forEach((message) => { %>
              <div class="message-container">
                <div class="message-information">
                  <p class="message-title">
                    <%- message.title %>
                  </p>
                  <p class="message-title">
                    <%- message.body %>
                  </p>
                </div>
              </div>
            <% }); %>
          </div>
      <% }; %>
    <% }; %>
  <% }; %>
  </body>
</html>